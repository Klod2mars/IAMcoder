meta:
  project_name: "aihomecoder_v2_mission_model"
  author: "Pré-Humain Directeur Adjoint"
  goal: "Définir le modèle binaire de mission d'AIHomeCoder : Lecture / Écriture"
  mode: "read_write_design"
  sanctuaire_hive: true
  philosophy: "Lire sans agir, agir sans réfléchir à nouveau."

context:
  environment: "local"
  validation_mode: "strict"
  output_format: "markdown"
  report_destination: "reports/mission_model_ref.md"

tasks:
  - id: "define_read_mission"
    name: "Mission de lecture"
    goal: "Décrire la logique, les paramètres et les sorties de la mission 'lecture'."
    task_type: "documentation"
    parameters:
      description: |
        Mission YAML type :
          - Tâche : task_gather_documents
          - Entrée : workspace
          - Sortie : rapport Markdown contextuel
        Objectif : Observer, filtrer, copier.
      destination: "config/prompts/mission_read_context.yaml"

  - id: "define_write_mission"
    name: "Mission d'écriture"
    goal: "Décrire la logique, les paramètres et les sorties de la mission 'écriture'."
    task_type: "documentation"
    parameters:
      description: |
        Mission YAML type :
          - Tâche : task_apply_writes
          - Entrée : rapport Markdown + plan YAML
          - Sortie : modifications locales tracées
        Objectif : Appliquer, consigner, ne jamais improviser.
      destination: "config/prompts/mission_apply_changes.yaml"

  - id: "define_task_apply_writes"
    name: "Définir la tâche 'task_apply_writes'"
    goal: "Implémenter la fonction qui permet à AIHomeCoder d'écrire selon un plan YAML précis."
    task_type: "code_generation"
    parameters:
      include_files: ["domain/services/task_logic_handler.py"]
      function_name: "task_apply_writes"
      responsibilities:
        - "Lire le plan d’écriture (YAML)"
        - "Ouvrir les fichiers autorisés"
        - "Insérer ou remplacer les blocs définis"
        - "Enregistrer les diagnostics (ContextBridge)"
        - "Respecter Guardrail.safe_write"

outputs:
  - format: "markdown"
    destination: "reports/mission_model_ref.md"

post_actions:
  - "Validate all three task definitions."
  - "Confirm: '✅ Modèle Lecture/Écriture AIHomeCoder V2 défini.'"
