# ============================================================
# üîç AIHomeCoder ‚Äì Audit Pr√©-Int√©gration Claude
# ============================================================
# Fichier : missions/audit_pre_integration_claude.yalm
# Auteur  : Pr√©-Humain Directeur Adjoint
# Date    : 2025-10-31
# Version : 1.0
# But     : V√©rifier la pr√©sence, la structure et la compatibilit√©
#           des dossiers destin√©s √† accueillir la m√©moire Claude Code.
# ============================================================

mission:
  name: "audit_pre_integration_claude"
  description: >
    Audit l√©ger visant √† confirmer que le syst√®me AIHomeCoder est pr√™t
    √† recevoir la m√©moire Claude Code sans alt√©rer la Clean Architecture.
  author: "Pr√©-Humain Directeur Adjoint"
  model: "qwen_local"
  mode: "read_only"

scope:
  include:
    - ./core/
    - ./config/
    - ./missions/
  exclude:
    - ./data/**
    - ./logs/**
    - ./reports/**
  max_files: 200
  max_file_size: 1MB

steps:
  - name: "check_core_knowledge_folder"
    description: "V√©rifie la pr√©sence du dossier core/knowledge et son contenu."
    action: "analyze_directory"
    target: "./core/knowledge"
    expect:
      required_files: ["CLAUDE.md", "claude-commands-guide.md", "settings.local.json"]
      optional_files: ["claude_legacy.yaml"]

  - name: "check_profiles"
    description: "V√©rifie la pr√©sence des profils n√©cessaires √† l‚Äôint√©gration."
    action: "analyze_yaml"
    targets:
      - ./config/profiles/default.yaml
      - ./config/profiles/qwen_local.yaml
      - ./config/profiles/deepseek_local.yaml

  - name: "check_settings_and_guardrail"
    description: "Valide la coh√©rence entre guardrail.py et settings.yaml."
    action: "parse_python"
    targets:
      - ./core/guardrail.py
      - ./core/settings.py

  - name: "generate_preintegration_report"
    description: "Synth√©tise les v√©rifications dans un rapport Markdown clair."
    action: "write_file"
    target: "./reports/audit_pre_integration_claude_{date}.md"
    content: |
      # üß© Audit Pr√©-Int√©gration ‚Äì AIHomeCoder & Claude

      **Date :** {date}  
      **Mode :** Read-Only  
      **Analyste :** Qwen Local  

      ## R√©sum√©
      - Dossier m√©moire : {knowledge_status}
      - Profils : {profiles_status}
      - Guardrail coh√©rent : {guardrail_status}

      ## D√©tails
      - `core/knowledge/` : {knowledge_details}
      - Profils YAML : {profiles_list}
      - Param√®tres par d√©faut : {settings_mode}

      ## Diagnostic
      {diagnostic_summary}

      ## Recommandations
      - Si le dossier `core/knowledge/` est vide, ex√©cuter `install_claude_legacy.yalm`.
      - Si des fichiers sont manquants, les copier manuellement avant int√©gration.
      - Rejouer `hello_claude_to_aihomecoder.yalm` apr√®s installation compl√®te.

      ## Statut final
      {status_summary}

# ============================================================
# ‚úÖ FIN DE MISSION
# ============================================================
