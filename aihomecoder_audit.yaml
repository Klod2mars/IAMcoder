# ============================================================
# üß≠ Mission Simple ‚Äî Audit Permacalendar V2 (Lecture seule)
# ============================================================

meta:
  project_name: "audit_simple_permacalendar"
  version: "1.0.0"
  description: "Mini-audit de structure pour tester le TaskLogicHandler dans un workspace externe."
  author: "Pr√©-Humain Directeur Adjoint"
  model: "qwen2.5-coder:7b"
  memory: "config/profiles/qwen_local.yaml"

context:
  environment: "ollama"
  mode: "read_only_audit"
  language: "fr"
  output_format: "markdown"
  philosophy: "Observer la structure r√©elle du projet sans modification."
  sanctuaire_hive: true

tasks:
  - name: "S√©lection du workspace"
    goal: "Confirmer le dossier du projet Permacalendar V2 √† auditer."
    task_type: "setup"
    parameters:
      ask_user_path: true
      variable_path: "external_workspace"
      read_only_mode: true
      log_all_actions: true

  - name: "Exploration des fichiers"
    goal: "Parcourir la structure du projet sur 3 niveaux et g√©n√©rer des statistiques d‚Äôextensions."
    task_type: "analysis"
    parameters:
      workspace_path: "${external_workspace}"
      depth: 3
      include_ext:
        - ".dart"
        - ".yaml"
        - ".json"
        - ".md"
      output_data: "data/tree_permacalendar.json"

  - name: "Cr√©ation du rapport Markdown"
    goal: "G√©n√©rer un rapport simple avec le nombre de fichiers et un aper√ßu de la structure."
    task_type: "report_generation"
    parameters:
      format: "markdown"
      destination: "reports/audit_permacalendar_simple.md"
      output_data: "data/tree_permacalendar.json"

outputs:
  - format: "markdown"
    destination: "reports/audit_permacalendar_simple.md"
  - format: "json"
    destination: "data/tree_permacalendar.json"

post_actions:
  - "Validate that reports/audit_permacalendar_simple.md exists."
  - "Display the first 20 lines of the Markdown report in console."
  - "Print confirmation message: '‚úÖ Audit simple du workspace termin√© avec succ√®s.'"

intent:
  - "V√©rifier le bon fonctionnement du TaskLogicHandler."
  - "G√©n√©rer un rapport lisible avec au moins un contenu concret."
  - "Tester la coh√©rence du flux entre lecture et √©criture."
